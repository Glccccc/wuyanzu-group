# 1_ref.py 文件说明

## 功能简介

`1_ref.py` 文件主要用于列出指定目录下的所有文件名。它通过定义一个 `list_files` 函数，接收一个目录路径作为参数，返回该目录下所有文件（不包括子目录）的文件名元组。如果传入的路径不是一个有效的目录，则返回 `None`。

## 主要功能点
- **路径处理**：使用 `pathlib.Path` 对传入的字符串路径进行处理，保证跨平台兼容性。
- **目录判断**：判断传入路径是否为有效目录，避免错误操作。
- **文件过滤**：只返回目录下的文件名，不包含子目录。
- **返回类型**：以元组形式返回所有文件名，便于后续处理。

## 适用场景
- 快速获取某个目录下所有文件的文件名列表。
- 可用于文件管理、批量处理、数据预览等场景。

## 示例
```python
# 假设有如下目录：
data_path = r'd:\G-Doc\TOP Academy\Python web\! Задачи\7. Импорт модулей, работа с путями, файловый ввод-вывод\data'
list_files(data_path)
# 返回：('7MD9i.chm', 'conf.py', 'E3ln1.txt', 'F1jws.jpg', 'le1UO.txt', 'q40Kv.docx', 'questions.quiz', 'r62Bf.txt', 'vars.py', 'xcD1a.zip')
```

## 注意事项
- 只会返回文件，不会返回子目录。
- 路径需为有效目录，否则返回 `None`。

# 2_ref.py 文件说明

## 功能简介

`2_ref.py` 文件与 `2.py` 类似，用于与用户交互，接收用户输入的一段文本，并调用 `important_message` 函数对该文本进行美化（如加边框、居中等格式化），最后将美化后的消息输出到终端。该脚本适合用于需要突出显示重要消息或提示的场景，且实现方式略有不同，便于对比学习。

# 3.py 文件说明

## 功能简介

`3.py` 文件用于与用户交互，提示用户输入丢失文件的路径，验证文件存在后，调用 `load_file` 函数将该文件复制到当前目录并动态导入，返回模块对象。适用于需要动态加载外部 Python 文件并在程序中使用其内容的场景。

# 3_ref.py 文件说明

## 功能简介

`3_ref.py` 文件与 `3.py` 类似，用于与用户交互，提示用户输入特定文件（如 conf.py）的路径，验证文件存在且文件名正确后，调用 `utils_ref.load_file` 导入该模块。适合需要动态加载指定配置文件并在程序中使用的场景，便于对比不同实现方式。

# 4.py 文件说明

## 功能简介

`4.py` 文件用于在 data 目录下所有 txt 文件中查找包含指定关键字的行，并可选返回上下文行。用户可指定一个或多个关键字以及上下文行数，函数会返回所有匹配结果的详细信息，适合文本检索、内容分析等场景。

# 4_ref.py 文件说明

## 功能简介

`4_ref.py` 文件与 `4.py` 类似，用于在指定目录下所有 txt 文件中查找包含指定关键字的行，并可选返回上下文行。实现方式略有不同，便于对比学习，适合批量文本内容检索和分析。

# 5.py 文件说明

## 功能简介

`5.py` 文件实现了一个通用的函数调用日志装饰器 `logger`，可用于记录被装饰函数的调用时间、参数、返回值或异常信息，并将日志写入 `data/function_calls.log` 文件。适用于需要追踪函数调用历史、调试和异常分析的场景。

## 使用方法
1. 定义一个函数，例如：
   ```python
   def add(a, b):
       return a + b
   ```
2. 使用 logger 装饰器：
   ```python
   add = logger(add)
   add(1, 2)
   ```
   或者使用装饰器语法糖：
   ```python
   @logger
   def add(a, b):
       return a + b
   ```
3. 每次调用被装饰函数，都会自动将调用信息追加写入 `data/function_calls.log`。

# 5_ref.py 文件说明

## 功能简介

`5_ref.py` 文件实现了与 `5.py` 类似的函数调用日志装饰器 `logger`，但实现方式更为健壮和灵活。它同样记录函数调用的时间、参数、返回值或异常，并将日志写入 `data/function_calls.log` 文件。适合需要详细追踪和分析函数调用历史的场景。

## 使用方法
1. 定义一个函数，例如：
   ```python
   def add(a, b):
       return a + b
   ```
2. 使用 logger 装饰器：
   ```python
   add = logger(add)
   add(1, 2)
   ```
   或者使用装饰器语法糖：
   ```python
   @logger
   def add(a, b):
       return a + b
   ```
3. 每次调用被装饰函数，都会自动将调用信息追加写入 `data/function_calls.log`。

# utils.py 文件说明

## 功能简介

`utils.py` 文件包含常用工具函数，包括：
- `important_message`：美化并格式化输出重要消息，适合用于终端提示。
- `load_file`：动态导入指定路径的 Python 文件为模块，便于在运行时加载外部代码。

## 使用方法
- `important_message`：
  ```python
  from utils import important_message
  print(important_message('Hello World!'))
  ```
- `load_file`：
  ```python
  from utils import load_file
  module = load_file('path/to/your.py')
  # 之后可通过module访问导入的内容
  ```

# utils_ref.py 文件说明

## 功能简介

`utils_ref.py` 文件为工具函数的参考实现，包括：
- `important_message`：美化并格式化输出消息，方式略有不同，便于对比学习。
- `load_file`：动态导入 conf.py 文件为模块，适合需要加载配置文件的场景。

## 使用方法
- `important_message`：
  ```python
  from utils_ref import important_message
  print(important_message('Hello World!'))
  ```
- `load_file`：
  ```python
  from utils_ref import load_file
  module = load_file('path/to/conf.py')
  # 之后可通过module访问配置内容
  ```

# si_unit.py 文件说明

## 功能简介

`si_unit.py` 文件实现了 SI 单位自动换算和格式化显示的类 `SIUnit`，可将数值自动转换为合适的 SI 前缀（如 k、M、G 等），并以可读字符串输出，适合科学计算和物理量展示。

## 使用方法
1. 创建 SIUnit 对象，例如：
   ```python
   v = SIUnit(1500, 'm')
   print(v)  # 输出：1.5 km
   ```
2. 可调用 `target` 方法转换为指定指数的单位：
   ```python
   print(v.target(0))  # 输出：1500 m
   ```
3. 适用于科学计算、物理量展示、单位换算等场景。

# 2023.05.28 文件夹项目总结

## 项目整体作用

本文件夹为 Python 编程学习与实用工具集合，内容涵盖了文件与目录操作、终端美化输出、动态模块导入、文本检索、函数调用日志、SI单位换算等多个实用主题。项目既包含了主代码实现，也包含了参考实现（`*_ref.py`），便于对比学习和掌握不同的编程思路。

此外，`data` 目录下包含了丰富的辅助数据文件，如 quiz 题库、配置文件、历史文本、图片、压缩包等，支持批量文本处理、配置管理、日志记录等多种应用场景。

## 主要功能模块

- **文件与目录操作**：快速获取目录下所有文件名，便于文件管理和批量处理。
- **终端美化输出**：将重要消息美化为带边框、居中的格式，提升终端交互体验。
- **动态模块导入**：支持运行时动态加载外部 Python 文件或配置文件，增强程序灵活性。
- **文本检索与上下文提取**：可在指定目录下批量检索文本文件中的关键字，并返回上下文内容，适合文本分析和数据挖掘。
- **函数调用日志**：通过装饰器自动记录函数调用的时间、参数、返回值或异常，便于调试和追踪。
- **SI单位换算**：自动将数值转换为合适的 SI 前缀，便于科学计算和物理量展示。
- **数据与配置管理**：`data/vars.py`、`data/conf.py` 提供了问答游戏的常量、应用配置等，支持扩展和自定义。

## 运行环境

- **Python 版本**：建议 Python 3.10 及以上（部分类型注解和语法依赖较新版本）。
- **依赖库**：仅依赖 Python 标准库（如 pathlib、shutil、importlib、sys、datetime 等），无需额外安装第三方库。
- **终端环境**：建议在支持宽字符显示的终端下运行，以获得最佳美化输出效果。

## 如何使用

1. **克隆或下载本项目**，确保文件结构完整，尤其是 `data` 目录及其内容。
2. **运行单个脚本**：可直接在命令行中运行各个 Python 文件（如 `python 2.py`），根据提示进行交互。
3. **参考与对比学习**：每个功能点均有主实现和参考实现（如 `2.py` 与 `2_ref.py`），可对比不同写法和风格。
4. **扩展与复用**：工具函数（如 `utils.py`、`si_unit.py`）可直接导入到其他项目中复用。
5. **数据驱动**：部分脚本依赖 `data` 目录下的配置或文本文件，运行前请确保相关文件存在。

## 适用场景

- Python 基础与进阶编程学习
- 文件与数据批量处理
- 终端交互美化与日志追踪
- 科学计算与单位换算
- 配置管理与动态模块加载
- 文本检索与数据分析
